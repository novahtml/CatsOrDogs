   <script 
   src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript">
function upload(event) {
event.preventDefault();
var data = new FormData($('form').get(0));

$.ajax({
    url: $(this).attr('action'),
    type: $(this).attr('method'),
    data: data,
    cache: false,
    processData: false,
    contentType: false,
    success: function(data) {
        alert('success');

 
        
    
    }
});
return false;
}

$(function() {
    $('form').submit(upload);
});
</script>

<form action="/upload/" method="post" id="file-upload-form" enctype="multipart/form-data"> {% csrf_token %}
    {{ form }}
    <input type="file" accept="image/*,image/jpeg"/><br />
    <button type="submit" class="btn btn-primary" id='upload-btn'>Upload</button>
</form>

	<!--
{% load staticfiles %}
<html>
<head>
<title>Выберите файлы</title>
    <style type="text/css">
    html, body{
        margin:0;
        padding:0;
        width:100%;
        height:100%;
    }
    .CenterBlock{
    	text-align: center;
        width:400px;
        height:400px;
        position:absolute;
        top:50%;
        left:50%;
        margin:-200px 0 0 -200px;
    }
    </style>
<script type="text/javascript" src="{% static 'js/selectingFiles.js' %}"></script>
</head>
 
<body>
<div class="CenterBlock">
	<form form method="POST" action="add_image>
		<input type="file" accept="image/*,image/jpeg"/><br />
		<div id="output">
		</div>
		<input type="submit" value="Отправить">
	</form>

</div>
</body>

</html>

<html>
  <head>
     <title> Django image and file upload using ajax </title>
  </head>
<body>
   <form enctype="multipart/form-data"
    id="id_ajax_upload_form" method="POST"
    novalidate="">
      {% csrf_token %}
      {{ form.as_p }}
      <input type="submit" />
   </form>
   {{ form.as_p }}
   <script 
   src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
   <script type="text/javascript">
    // form upload
    $('#id_ajax_upload_form').submit(function(e){
        e.preventDefault();
        $form = $(this)
        var formData = new FormData(this);
        $.ajax({
            url: window.location.pathname,
            type: 'POST',
            data: formData,
            success: function (response) {
                $('.error').remove();
                console.log(response)
                if(response.error){
                    $.each(response.errors, function(name, error){
                        error = '<small class="text-muted error">' + error + '</small>'
                        $form.find('[name=' + name + ']').after(error);
                    })
                }
                else{
                    alert(response.message)
                    window.location = ""
                }
            },
            cache: false,
            contentType: false,
            processData: false
        });
    });
    // end
   </script>
</body>
</html> -->